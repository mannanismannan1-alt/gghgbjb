{% extends "base.html" %}

{% block title %}{{ category.name }} - PDFs{% endblock %}

{% block content %}
<style>
    .category-header {
        text-align: center;
        margin: 30px 0;
        padding: 20px;
        background: var(--white);
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .category-image {
        width: 120px;
        height: 120px;
        border-radius: 12px;
        object-fit: cover;
        margin-bottom: 15px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .category-title {
        color: var(--primary);
        font-size: 26px;
        font-weight: 700;
        margin-bottom: 10px;
    }

    .category-description {
        color: var(--text-light);
        font-size: 15px;
        max-width: 600px;
        margin: 0 auto 15px;
    }

    .category-stats {
        display: flex;
        justify-content: center;
        gap: 20px;
        font-size: 14px;
        color: var(--text-light);
    }

    .sort-bar {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 25px;
        flex-wrap: wrap;
    }

    .sort-btn {
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 13px;
        text-decoration: none;
        transition: all 0.3s ease;
        border: 1px solid var(--primary);
    }

    .sort-btn.active {
        background: var(--primary);
        color: white;
    }

    .sort-btn:not(.active) {
        background: var(--white);
        color: var(--primary);
    }

    .pdf-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }

    .pdf-card {
        background: var(--white);
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        transition: all 0.3s ease;
    }

    .pdf-card:hover {
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        transform: translateY(-3px);
    }

    .pdf-icon {
        font-size: 40px;
        margin-bottom: 12px;
    }

    .pdf-title {
        color: var(--primary);
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 8px;
        line-height: 1.4;
    }

    .pdf-description {
        color: var(--text-light);
        font-size: 13px;
        margin-bottom: 12px;
        line-height: 1.4;
    }

    .pdf-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 12px;
        color: var(--text-light);
        margin-bottom: 15px;
    }

    .pdf-actions {
        display: flex;
        gap: 10px;
    }

    .pdf-actions a {
        flex: 1;
        padding: 10px;
        text-align: center;
        border-radius: 8px;
        font-size: 13px;
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .btn-view {
        background: var(--primary);
        color: white;
    }

    .btn-download {
        background: var(--secondary);
        color: white;
    }

    .back-link {
        display: inline-block;
        margin-bottom: 20px;
        color: var(--primary);
        text-decoration: none;
        font-weight: 500;
    }

    .empty-state {
        text-align: center;
        padding: 60px 20px;
        background: var(--white);
        border-radius: 12px;
    }
</style>

<a href="{{ url_for('pdfs') }}" class="back-link">‚Üê Back to Categories</a>

<div class="category-header">
    {% if category.image %}
        <img src="/uploads/pdf_topics/{{ category.image }}" alt="{{ category.name }}" class="category-image">
    {% else %}
        <div style="font-size: 60px; margin-bottom: 15px;">üìö</div>
    {% endif %}
    <h1 class="category-title">{{ category.name }}</h1>
    {% if category.description %}
        <p class="category-description">{{ category.description }}</p>
    {% endif %}
    <div class="category-stats">
        <span>üìÑ {{ pdfs|length }} PDFs</span>
        <span>üëÅÔ∏è {{ category.view_count or 0 }} views</span>
    </div>
</div>

<div class="sort-bar">
    <a href="{{ url_for('pdf_category', category_id=category.id, sort='newest') }}" class="sort-btn {{ 'active' if sort == 'newest' else '' }}">üïê Newest</a>
    <a href="{{ url_for('pdf_category', category_id=category.id, sort='popular') }}" class="sort-btn {{ 'active' if sort == 'popular' else '' }}">üî• Popular</a>
    <a href="{{ url_for('pdf_category', category_id=category.id, sort='az') }}" class="sort-btn {{ 'active' if sort == 'az' else '' }}">üî§ A-Z</a>
</div>

{% if pdfs %}
    <div class="pdf-grid">
        {% for pdf in pdfs %}
        <div class="pdf-card">
            <div class="pdf-icon">üìÑ</div>
            <h3 class="pdf-title">{{ pdf.title }}</h3>
            {% if pdf.description %}
                <p class="pdf-description">{{ pdf.description[:100] }}{% if pdf.description|length > 100 %}...{% endif %}</p>
            {% endif %}
            <div class="pdf-meta">
                <span>üëÅÔ∏è {{ pdf.view_count or 0 }} views</span>
                <span>‚¨áÔ∏è {{ pdf.download_count or 0 }} downloads</span>
            </div>
            <div class="pdf-actions">
                <a href="{{ url_for('view_pdf', pdf_id=pdf.id) }}" class="btn-view">üëÅÔ∏è View</a>
                <a href="{{ url_for('download_pdf', pdf_id=pdf.id) }}" class="btn-download">‚¨áÔ∏è Download</a>
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="empty-state">
        <div style="font-size: 50px; margin-bottom: 15px;">üìÑ</div>
        <h3 style="color: var(--primary); margin-bottom: 10px;">No PDFs Yet</h3>
        <p style="color: var(--text-light);">This category doesn't have any PDFs yet</p>
    </div>
{% endif %}

{% endblock %}
