{% extends "base.html" %}

{% block title %}PDFs - Dalil Docs{% endblock %}

{% block content %}
<style>
    .page-header {
        text-align: center;
        margin: 30px 0;
    }

    .page-title {
        color: var(--primary);
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 10px;
    }

    .page-subtitle {
        color: var(--text-light);
        font-size: 15px;
        margin-bottom: 20px;
    }

    .sort-bar {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 25px;
        flex-wrap: wrap;
    }

    .sort-btn {
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 13px;
        text-decoration: none;
        transition: all 0.3s ease;
        border: 1px solid var(--primary);
    }

    .sort-btn.active {
        background: var(--primary);
        color: white;
    }

    .sort-btn:not(.active) {
        background: var(--white);
        color: var(--primary);
    }

    .topic-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 20px;
        margin: 20px 0;
        padding: 0 10px;
    }

    .topic-card {
        background: var(--white);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        transition: all 0.3s ease;
        text-decoration: none;
        color: inherit;
        display: flex;
        flex-direction: column;
        cursor: pointer;
    }

    .topic-card:hover {
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        transform: translateY(-5px);
    }

    .topic-image-container {
        width: 100%;
        height: 0;
        padding-bottom: 56.25%;
        overflow: hidden;
        position: relative;
        background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-mid) 100%);
    }

    .topic-image-container img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .topic-image-container .default-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 70px;
        opacity: 0.9;
    }

    .topic-info {
        padding: 18px;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .topic-name {
        color: var(--primary);
        font-size: 17px;
        font-weight: 700;
        margin-bottom: 10px;
        line-height: 1.3;
    }

    .topic-description {
        color: var(--text-light);
        font-size: 13px;
        margin-bottom: 10px;
        line-height: 1.4;
    }

    .topic-meta {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 12px;
    }

    .topic-count {
        color: var(--text-light);
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .view-count {
        font-size: 12px;
        color: var(--text-light);
    }

    .view-arrow {
        color: var(--primary);
        font-size: 18px;
    }

    .empty-state {
        text-align: center;
        padding: 60px 20px;
        background: var(--white);
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .empty-icon {
        font-size: 60px;
        margin-bottom: 20px;
    }
</style>

<div class="page-header">
    <h1 class="page-title">üìÑ PDFs Library</h1>
    <p class="page-subtitle">Mukhtalif mawzooat par PDFs ka majmooa - Parhein aur download karein</p>
</div>

<div class="sort-bar">
    <a href="{{ url_for('pdfs', sort='newest') }}" class="sort-btn {{ 'active' if sort == 'newest' else '' }}">üïê Jadeed</a>
    <a href="{{ url_for('pdfs', sort='popular') }}" class="sort-btn {{ 'active' if sort == 'popular' else '' }}">üî• Maqbool</a>
    <a href="{{ url_for('pdfs', sort='az') }}" class="sort-btn {{ 'active' if sort == 'az' else '' }}">üî§ A-Z</a>
</div>

{% if categories %}
    <div class="topic-grid">
        {% for category in categories %}
            <a href="{{ url_for('pdf_category', category_id=category.id) }}" class="topic-card">
                <div class="topic-image-container">
                    {% if category.image %}
                        <img src="{{ url_for('serve_upload', folder='pdf_topics', filename=category.image) }}" alt="{{ category.name }}">
                    {% else %}
                        <span class="default-icon">üìö</span>
                    {% endif %}
                </div>
                <div class="topic-info">
                    <div>
                        <div class="topic-name">{{ category.name }}</div>
                        {% if category.description %}
                            <div class="topic-description">{{ category.description[:80] }}{% if category.description|length > 80 %}...{% endif %}</div>
                        {% endif %}
                    </div>
                    <div class="topic-meta">
                        <div class="topic-count">
                            <span>üìë</span>
                            <span>{{ category.pdfs|length }} PDFs</span>
                        </div>
                        <span class="view-arrow">‚Üí</span>
                    </div>
                    <div class="view-count">üëÅÔ∏è {{ category.view_count or 0 }} views</div>
                </div>
            </a>
        {% endfor %}
    </div>
{% else %}
    <div class="empty-state">
        <div class="empty-icon">üìÑ</div>
        <h3 style="color: var(--primary); margin-bottom: 10px;">Koi Category Mojood Nahi</h3>
        <p style="color: var(--text-light);">Abhi tak koi PDF categories shamil nahi ki gayin</p>
    </div>
{% endif %}

{% endblock %}
